---
id: solution-deploy-ier
sidebar_position: 4
title: IBM Enterprise Records
---

## Deploy IER

If IBM Enterprise Records is required, you should have already staged the image per the previous instructions in Staging.

### Create the `ibm-ier-secret`

If deploying IER, create the following
 ```tsx
kubectl create secret generic ibm-ier-secret \
--from-literal=appLoginUsername="cpadmin" \
--from-literal=appLoginPassword="Password" \
--from-literal=keystorePassword="p@ssw0rd" \
--from-literal=ltpaPassword="p@ssw0rd"
```
### Updating CR for IER deployment

In the filenet CR you used to deploy the cluster, make the following changes and additions:
```yaml
  content_optional_components:
    cpe: true
    graphql: true
    cmis: false
    css: false
    es: false
    tm: false
    ban: true
    // highlight-start
    ier: true
    // highlight-end

```
After the `navigator_configuration` entry in the CR, add the following section
```yaml
  ier_configuration:
    arch:
      amd64: "3 - Most preferred"
    replica_count: 2
    ier_ext_tls_secret_name:
    ier_auth_ca_secret_name:
    image:
      // highlight-start
      # This should point to whatever repo you staged the image in. Leave this as default if using IBM's registry
      repository: cp.icr.io/cp/cp4a/ier/ier
      // highlight-end
      tag: ga-5218-ier-if005
      pull_policy: IfNotPresent
      // highlight-start
      # This NEEDS to be set to the correct secret name. Make sure it's the one you created above.
    ier_secret_name: ibm-ier-secret
      // highlight-end
    log:
      format: json
    resources:
      requests:
        cpu: 500m
        memory: 512Mi
      limits:
        cpu: 1
        memory: 1024Mi
    auto_scaling:
      enabled: false
      max_replicas: 3
      min_replicas: 1
      target_cpu_utilization_percentage: 80
    ier_production_setting:
      license: accept
    collectd_enable_plugin_write_graphite: false
    run_as_user: 
    datavolume:
      existing_pvc_for_ier_instance: ""
    probe:
      readiness:
        initial_delay_seconds: 120
        period_seconds: 5
        timeout_seconds: 10
        failure_threshold: 6
      liveness:
        initial_delay_seconds: 600
        period_seconds: 5
        timeout_seconds: 5
        failure_threshold: 6
```

### Apply the CR
 
```bash
kubectl apply -f ibm_fncm_cr_production.yaml
```

Wait for about five minutes or so and then check to see if the pod has spun up.
 
```tsx
kubectl get pods
NAME                                          READY   STATUS    RESTARTS   AGE
fncmdeploy-cmis-deploy-654774fd5f-5xtnr       1/1     Running   0          6d6h
fncmdeploy-cpe-deploy-7d7dbffc94-n86tt        1/1     Running   0          3d9h
fncmdeploy-css-deploy-1-66bbd484b-qzrl9       1/1     Running   0          6d7h
fncmdeploy-es-deploy-58f9659b8b-klmjh         1/1     Running   0          6d6h
fncmdeploy-graphql-deploy-775766b99d-cx899    1/1     Running   0          6d6h
// highlight-start
fncmdeploy-ier-deploy-6f7465cd5d-sxp9d        1/1     Running   0          7h55m
// highlight-end
fncmdeploy-navigator-deploy-58b9c95c4-k9gx7   1/1     Running   0          157m
fncmdeploy-tm-deploy-7d4fd64759-x28qw         1/1     Running   0          6d6h
ibm-fncm-operator-748884b478-qkd4f            1/1     Running   0          4d2h
postgres-759fd876ff-d5fxd                     1/1     Running   0          6d9h

```
